<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<title>俄罗斯方块（VUE）</title>
		<link rel="stylesheet" type="text/css" href="css/style.css"/>
		<script src="js/jquery-2.1.0.js" type="text/javascript" charset="utf-8"></script>
		<script src="js/vue.js" type="text/javascript" charset="utf-8"></script>
		<script src="js/models.js" type="text/javascript" charset="utf-8"></script>
		<script src="js/game.js" type="text/javascript" charset="utf-8"></script>
		<script src="js/init.js" type="text/javascript" charset="utf-8"></script>
		
		<style type="text/css">
		</style>
	</head>
	<body>
		<div id="gamediv" class = "gamediv" :style="{top:cellHeight+'px', left:'50px', width:cellWidth*gsMatrixCols+'px', height:cellHeight*gsMatrixRows+'px'}">			
		</div>
		<div id="nextdiv" class = "gamediv" :style="{top:cellHeight+'px', left:cellWidth*gsMatrixCols+100+'px', width:cellWidth*4+'px', height:cellHeight*4+'px'}">			
		</div>
		<div style="position: absolute;left:500px;">
			<button type="button" onclick="test()">Click Me for test!</button>
			<button type="button" onclick="bigger()">Bigger!</button>
			<button type="button" onclick="smaller()">Smaller!</button>
			<button type="button" onclick="RestoreDefault()">Restore default!</button>
		</div>
		
		<script>
			function test(){
				app.nowarray = deepcopy(doneMatrix);
				app.nowarray[6][6] = 1;
				console.log(doneMatrix);
			}
			
			function bigger(){
				app.cellWidth++;
				app.cellHeight++;
			}
			
			function smaller(){
				app.cellWidth--;
				app.cellHeight--;
			}
			
			function RestoreDefault(){
				app.cellWidth = cellWidth;
				app.cellHeight = cellHeight;
			}
			
			window.onload = function (){
			document.onkeydown = function (e){
				if(e.keyCode == 38){//up
					onup();
				}else if(e.keyCode == 39){//right
					onright();
				}else if(e.keyCode == 40){//down
					ondown();
				}else if(e.keyCode == 37){//left
					onleft();
				}else if(e.keyCode == 32){//space
					console.log(e.keyCode);
				}
			}
			
			function onup(){
				app.currentmodel.exchange(1);
				if( !CheckCouldMove(app.currentmodel, 0, 0) )
				{
					app.currentmodel.exchange(-1);
				}
			}
			function ondown(){
				if( CheckCouldMove(app.currentmodel, 1, 0) )
				{
					app.currentmodel.origin['x'] = app.currentmodel.origin['x'] + 1;
				}
				if( !CheckCouldMove(app.currentmodel, 1, 0) )
				{
					uptoDoneMatrix(app.currentmodel);
					app.currentmodel = createModel();
					console.log("test---------------------");
					console.log(app);
				}
				
				console.log(app.nextmodel.data);
				
			}
			function onleft(){
				if( CheckCouldMove(app.currentmodel, 0, -1) )
				{
					app.currentmodel.origin['y'] = app.currentmodel.origin['y'] - 1;
				}
			}
			function onright(){
				if( CheckCouldMove(app.currentmodel, 0, 1) )
				{
					app.currentmodel.origin['y'] = app.currentmodel.origin['y'] + 1;
				}
			}
		}
		</script>
	</body>
</html>
